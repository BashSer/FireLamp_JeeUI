# Change Log

## v3.0.0 (2023-04-07) первый выпуск прокта после форка
 - добавлена http/mqtt команда для регулировки яркости лампы в процентах 0-100
 - добавлена http/mqtt команда для регулировки громкости мп3 плеера
 - добавлен класс Effcfg для управления конфигурацией эффектов, упразднены операции с создание тяжелых экземпляров класса EffectWorker при копировании конфигураций эффектов, работе затухания и пр.
 - раскрыто системное меню по-умолчанию, упразднена опция сборки 'SHOWSYSCONFIG'
 - при сборке с плеером настройки DFPlayer'а всегда показываются в WebUI, независимо от того подключен ли плеер
 - значики микрофона и нумерация эффектов в списках включена по-умолчанию, убрана опция, поозволяющая отключать эти символы
 - реализована буферизованная запись при генерации кеш-файлов и индекса на ФС
 - значительное ускорение процедур генерации кеш-файлов и индекса на ФС
 - упраздены кривые схемы и разнобой с медленной/быстрой/отложенной генерацией файлов списков эффектов, используется один унифицированный генератор
 - переработана схема подрузки конфигурации и переключения эффектов, устранены дублирующие вызовы, оптимизированна работа с файлами
 - реализовано корректное кеширование списков эффектов на стороне браузера, устранены излишние подгрузки в случае если списки не изменялись
 - переработан класс реализующий плавное изменение яркости
 - оптимизирована mqtt публикация, в случае если нет подключения с серверу, попытки публикации отменяются
 - оптимизированы классы GradientPaletteList, GradientPalette
 - удалена поддержка протокола ArduinoOTA, успользуется обновление через http
 - влит код из репозитория andy040670 примерно от 2021 года, устранены ошибки сборки
 - переработаны списки контролов UIControl
    - указатели заменены на smartpointers, реализованы конструкторы копирования, глубокие копии списков, устранение утечек памяти, ошибки работы с памятью, висячие указатели
 - к репозиторию настроена CI сборка
 - переработаны скрипты установки/сборки для windows (спасибо andy040670)
    - добавлены переменные для путей к репозиториям и зависимостям
    - убрана зависимость от внешней утилиты wget.exe
 - реструктуризация кода, файлов, сторонних бибилиотек
    - некоторые сторонние библиотеки убраны из репозитория и заменены внешними зависимостями
    - переименованы констатны TCONST_00XX, CMD_* в человекочитаемый вид
    - переименованы множество имен переменных, классов, макросов в соответсвии с общепринятым стилем
    - переработаны заголовочные файлы, перенесены определения и декларации в соответсвии с логической принадлежностью файлов, код методов перенесен в соответствующие cpp файлы
    - переработаны инклюды заголовочных файлов в соответсвии с минимально необходимыми зависимостями
    - из репозитория удалены посторонние бинарные файлы
 - исправлены множество ошибкок в коде работы с эффектами - вылеты за границы массивов, деление на ноль, утечки и излишний расход памяти, оптимизация циклов и т.п.
    - EffectSplashBals
    - EffectOsc
    - EffectLeapers
    - EffectPicasso
    - EffectMagma
    - EffectNexus
    - EffectLiquidLamp
    - EffectPicasso
    - EffectSmokeballs
    - EffectBBalls
    - EffectMaze
    - EffectWrain
    - Puzzle
    - EffectSmokeballs
    - EffectPolarL
    - EffectPacific
    - EffectStarShips
    - EffectFire2021
    - EffectCube2d
    - EffectPopcorn
    - EffectPuzzles
    - EffectRadialFire
    - EffectWcolor
